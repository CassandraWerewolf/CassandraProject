create or replace view Tally_votes as (select Tally.game_id AS game_id,Tally.day AS day,u1.name AS voter,u2.name AS votee,Tally.vote_count AS vote_count,if((Tally.unvote = 0),'No','Yes') AS unvoted,if((Tally.nightfall = 0),'No','Yes') AS nightfall,Tally.vote_article AS vote_article,Tally.unvote_article AS unvote_article,Tally.nightfall_article AS nightfall_article from Tally, Users u1, Users u2 where Tally.voter = u1.id and Tally.votee = u2.id)
Union
(select Tally.game_id AS game_id,Tally.day AS day,u1.name AS voter,Tally.misc AS votee,Tally.vote_count AS vote_count,if((Tally.unvote = 0),'No','Yes') AS unvoted,if((Tally.nightfall = 0),'No','Yes') AS nightfall,Tally.vote_article AS vote_article,Tally.unvote_article AS unvote_article,Tally.nightfall_article AS nightfall_article from Tally, Users u1 where Tally.voter = u1.id and Tally.votee = 0) order by game_id,day,vote_count
